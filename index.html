
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
        <link rel="next" href="pythondoc/">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.4">
    
    
      
        <title>Communicate Trinket M0 Doc</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.50c56a3b.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Communicate Trinket M0 Doc" class="md-header__button md-logo" aria-label="Communicate Trinket M0 Doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Communicate Trinket M0 Doc
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Introduction
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Communicate Trinket M0 Doc" class="md-nav__button md-logo" aria-label="Communicate Trinket M0 Doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Communicate Trinket M0 Doc
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#about-the-project" class="md-nav__link">
    <span class="md-ellipsis">
      About the Project
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#video" class="md-nav__link">
    <span class="md-ellipsis">
      Video
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    <span class="md-ellipsis">
      Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connecting-to-the-board" class="md-nav__link">
    <span class="md-ellipsis">
      Connecting to the board
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-board-codepy-operations" class="md-nav__link">
    <span class="md-ellipsis">
      On board code.py operations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="pythondoc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CircuitPython Doc
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="dartdoc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dart Doc
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#about-the-project" class="md-nav__link">
    <span class="md-ellipsis">
      About the Project
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#video" class="md-nav__link">
    <span class="md-ellipsis">
      Video
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    <span class="md-ellipsis">
      Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connecting-to-the-board" class="md-nav__link">
    <span class="md-ellipsis">
      Connecting to the board
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-board-codepy-operations" class="md-nav__link">
    <span class="md-ellipsis">
      On board code.py operations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<div><h1 id="introduction">Introduction</h1>
<h2 id="about-the-project">About the Project</h2>
<p>This project involves communicating from a computer to a Adafruit Trinket M0 board using Dart. The board is connected to our computer using the Micro USB port.</p>
<p>Our goal is to talk to a R557 fingerprint sensor through the Trinket M0 board. Luckily, the sensor based its protocol on the Adafruit Fingerprint library, and we can use the library to communicate with it. Our Dart and Python code are developed to use most of the functions in the library and more importantly, send and receive fingerprint templates back to the computer.</p>
<p>The project is a framework or proof of concept for a Biometric Verification System with templates store in a database that can be use to verify users/customers/clients/etc. The Dart language also enables the developement of a mobile app on Android or IOS to use this system.</p>
<p>This project is done on Linux with Window or MacOS being technically possible but requires more work compiling libserialport library to their platform. We have no guarantee that it will work in Window or MacOS as it has not been tested by us.</p>
<p><strong>Update 1: Midway through the project, we discovered that the Trinket M0 is unable to receive fingeprint templates due to the limited 32KB of RAM. We have replaced it with the Raspberry Pi Pico with 264KB of RAM and now that functionality is available</strong></p>
<p><strong>Update 2: We changed the Raspberry Pi Pico to the Seeed Studio XIAO RP2040 to decrease the size of the board and added a 0.91 inch OLED for better user guidance when using the fingerprint sensor.</strong></p>
<h2 id="getting-started">Getting Started</h2>
<p>This section described how to quickly set up the code and start communicating with trinket m0.</p>
<ol>
<li>Download Dart SDK</li>
<li>Download the project files in <a href="https://github.com/SuperStupidness/trinket_m0_communicate/tree/main">Github</a></li>
<li>
<p>Navigate to the folder and download dependencies of dart code</p>
<pre><code>    dart pub upgrade
</code></pre>
</li>
<li>
<p>Download libserialport (C) library using</p>
<pre><code>    sudo apt install libserialport-dev
</code></pre>
</li>
<li>
<p>Copy code.py and lib folder into Trinket M0/Raspberry Pi Pico</p>
</li>
<li>
<p>Run the dart code</p>
<pre><code>    dart communicate_trinket_m0.dart
</code></pre>
</li>
<li>
<p>(Optional) If the Dart code shows that the board is in REPL when first booted up, use command 'reset' by typing it in the terminal to restart the python code.</p>
</li>
</ol>
<h2 id="example">Example</h2>
<h3 id="video">Video</h3>
<p>Enroll and Identify command on XIAO RP2040 with display.</p>
<p><a href="https://youtu.be/zw-69DX8JnY"><img alt="" src="assets/enroll_thumbnail.png"></a></p>
<p>Error display</p>
<p><a href="https://youtu.be/X3TFMfm6t-o"><img alt="" src="assets/error_thumbnail.png"></a></p>
<h3 id="setup">Setup</h3>
<figure>
    <img src="./assets/trinketm0.jpg" width="500" height="500" alt="Trinket M0">
    <figcaption>Trinket M0 board connected to fingerprint sensor</figcaption>
    <img src="./assets/raspberrypipico.jpg" width="500" height="500" alt="Raspberry Pi Pico">
    <figcaption>Raspberry Pi Pico connected to fingerprint sensor</figcaption>
    <img src="./assets/xiao_with_display.jpg" width="500" height="500" alt="Xiao RP2040">
    <figcaption>Seeed Studio XIAO RP2040 connected to fingerprint sensor and display</figcaption>
</figure>

<h3 id="connecting-to-the-board">Connecting to the board</h3>
<pre><code class="language-bash">Anon:~/Desktop/trinket_m0_communicate$ dart communicate_trinket_m0.dart
Listing available ports...
Port Number 1: /dev/ttyACM0
    Description: Pico - E6605481DB635C34
    Manufacturer: Raspberry Pi
    Serial Number: E6605481DB635C34
    Product ID: 0x80f4
    Vendor ID: 0x239a
    Read/Write Available: true
Done
Please select fingerprint port number (-1 to exit or 0 to list all available port):
</code></pre>
<p>Note: If Read/Write Available is False, make sure to close any serial console/terminal that is talking to the board. Ex: Serial Console in Mu Editor</p>
<pre><code>Please select fingerprint port number ...: 1
    Port 1 selected.
    Port Name: /dev/ttyACM0
    Description: Pico - E6605481DB635C34
    Manufacturer: Raspberry Pi
    Serial Number: E6605481DB635C34
    Product ID: 0x80f4
    Vendor ID: 0x239a

    Current Configuration of /dev/ttyACM0
    Baud rate: 9600
    Number of Data Bits: 8
    Number of Parity Bits: -1
    Number of Stop Bits: 1
    Rts Cts: 1 0
    Dsr Dtr: 0 1
    XonXoff: 2

Setting /dev/ttyACM0 to default config based on working config (Linux -&gt; trinket m0)
Success!
    Current Configuration of /dev/ttyACM0
    Baud rate: 115200
    Number of Data Bits: 8
    Number of Parity Bits: 0
    Number of Stop Bits: 1
    Rts Cts: 1 0
    Dsr Dtr: 0 1
    XonXoff: 2

Dart: Fingerprint Commands:
    1 -&gt; Enroll fingerprint
    2 -&gt; Identify fingerprint
    3 -&gt; Delete fingerprint
    4 -&gt; Enroll and send template back via USB
    5 -&gt; Upload template, get fingerprint and verify
    6 -&gt; Clear all templates in sensor's library
    stop -&gt; end communication with board and exit
    reset -&gt; Rerun code python on board (Send Ctrl + D command)

Displaying output from board...
]0;code.py | 8.2.9\]0;code.py | 8.2.9\
ERROR 87
READTEMPLATE 1 2 3 5 8
&gt;
</code></pre>
<h3 id="on-board-codepy-operations">On board code.py operations</h3>
<ol>
<li>
<p>Enroll fingerprint</p>
<pre><code>Displaying output from board...
]0;code.py | 8.2.9\]0;code.py | 8.2.9\
ERROR 87
READTEMPLATE 1 2 3 5 8
&gt;1 4
1 4
FINGERREQUEST
FINGERHOLD
OKIMAGE
TEMPLATING
OKTEMPLATE
REMOVEFINGER
FINGERREQUEST
FINGERHOLD
OKIMAGE
TEMPLATING
OKTEMPLATE
CREATEMODEL
OKMODEL
STOREMODEL
OKSTORAGE
READTEMPLATE 1 2 3 4 5 8
&gt;
</code></pre>
</li>
<li>
<p>Identify fingerprint</p>
<pre><code>READTEMPLATE 1 2 3 4 5 8
&gt;2
2
FINGERREQUEST
OKIMAGE
FINGERHOLD
OKIMAGE
TEMPLATING
OKTEMPLATE
SEARCHING
OKSEARCH 4 100
READTEMPLATE 1 2 3 4 5 8
&gt;
</code></pre>
</li>
<li>
<p>Delete fingerprint template (in sensor)</p>
<pre><code>READTEMPLATE 1 2 3 4 5 8
&gt;3 8
3 8
OKDELETE
READTEMPLATE 1 2 3 4 5
&gt;
</code></pre>
</li>
<li>
<p>Download template to computer</p>
<pre><code>&gt;4
4
FINGERREQUEST
FINGERHOLD
OKIMAGE
TEMPLATING
OKTEMPLATE
REMOVEFINGER
FINGERREQUEST
FINGERHOLD
OKIMAGE
TEMPLATING
OKTEMPLATE
CREATEMODEL
OKMODEL
STOREMODEL
OKSTORAGE
TEMPDOWNLOAD
OKDOWNLOAD 2048
b'46704c69...(long hex data here)'
READTEMPLATE 1 2 3 4 5
&gt;
</code></pre>
</li>
<li>
<p>Upload template to sensor</p>
<pre><code>READTEMPLATE 1 2 3 4 5
&gt;5
5
46704c69...(long hex data here)
FINGERREQUEST
OKIMAGE
FINGERHOLD
OKIMAGE
TEMPLATING
OKTEMPLATE
OKMATCH
READTEMPLATE 1 2 3 4 5
&gt;
</code></pre>
</li>
<li>
<p>Clear all fingerprint template on sensor</p>
<pre><code>READTEMPLATE 1 2 3 4 5
&gt;6
6
OKDELETE
READTEMPLATE 0
&gt;
</code></pre>
</li>
<li>
<p>Cancle taking fingerprint</p>
<pre><code>READTEMPLATE 2
&gt;2
2
FINGERREQUEST
^[
CANCEL
READTEMPLATE 2
&gt;
</code></pre>
</li>
</ol></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.c011b7c0.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.7389ff0e.min.js"></script>
      
    
  </body>
</html>